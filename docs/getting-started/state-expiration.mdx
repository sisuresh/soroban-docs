---
sidebar_position: 10
title: 8. State Expiration
description: State Expiration Semantics
---

# Operations

## BumpFootprintExpirationOp

### Semantics

XDR:
```
/*
    Threshold: med
    Result: BumpFootprintExpirationResult
*/
struct BumpFootprintExpirationOp
{
    ExtensionPoint ext;
    uint32 ledgersToExpire;
};
```

`BumpFootprintExpirationOp` is a Soroban operation that will bump the expiration
ledger of the entries specified in the *read-only set of the footprint*. The
read-write set must be empty. The bump will make sure that the entries will not
expire before ledgersToExpire ledgers from now.

Let's look at this example below.
```
Ex. Last closed ledger (LCL) = 5 Current Ledger = 6 ledgersToExpire = 8

entry1.expirationLedger = 10 
entry2.expirationLedger = 14
entry3.expirationLedger = 10000

entry1.expirationLedger will be updated to 14 so it will live for 8 more ledgers
after the current one closes and the entry can be accessed in ledgers [6, 14]. Note: This is going to be updated to count
Current Ledger, so it'll become [6, 13].

entry2 and entry3 will not be updated because they already have an
expirationLedger that is large enough.
```

### Transaction resources

`BumpFootprintExpirationOp` is a Soroban operation, and therefore must be the
only operation in a transaction. The transaction also needs to populate
`SorobanTransactionData` transaction extension explained
[here](invoking-contracts-with-transactions.mdx#transaction-resources). To fill
out `SorobanResources`, use preflight mentioned in the provided link, or make
sure `readBytes` includes the key and entry size of every entry in the
`readOnly` set and make sure `extendedMetaDataSizeBytes` is at least double of
`readBytes`.


## RestoreFootprintOp

XDR:
```
/*
    Threshold: med
    Result: RestoreFootprintOp
*/
struct RestoreFootprintOp
{
    ExtensionPoint ext;
};
```

`RestoreFootprintOp` is a Soroban operation that will restore expired entries
specified in the *read-write set of the footprint* and make them accessible
again. The read-only set of the footprint must be empty. An expired entry is one
where its expirationLedger is less than the current ledger number.

### Transaction resources

`RestoreFootprintOp` is a Soroban operation, and therefore must be the only
operation in a transaction. The transaction also needs to populate
`SorobanTransactionData` transaction extension explained
[here](invoking-contracts-with-transactions.mdx#transaction-resources). To fill
out `SorobanResources`, use preflight mentioned in the provided link, or make
sure `writeBytes` includes the key and entry size of every entry in the
`readWrite` set and make sure `extendedMetaDataSizeBytes` is at least double of
`writeBytes`.
